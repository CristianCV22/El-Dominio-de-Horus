/* ============================================= */
/* Skin: El Despertar (v2.0 - El Umbral)         */
/* ============================================= */

/* 1. La Pantalla de Carga: Nuestro Escenario */
#pantalla-carga {
  background-color: #160c0c; /* El fondo inicial siempre es negro */
  z-index: 9999;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden; /* Muy importante para que nada se desborde */
}
/* 2. Acto I: La Apertura de los Ojos */
.parpado {
  content: "";
  position: absolute;
  left: 0;
  width: 100%;
  height: 50%;
  background-color: #130d0d;
  z-index: 100; /* Los párpados están por encima de todo */
  transition: transform 1.5s cubic-bezier(0.87, 0, 0.13, 1);
}
.parpado.superior {
  top: 0;
}
.parpado.inferior {
  bottom: 0;
}

/* La animación se dispara al añadir 'oculto' */
#pantalla-carga.abriendo-ojos .parpado.superior {
  transform: translateY(-100%);
}
#pantalla-carga.abriendo-ojos .parpado.inferior {
  transform: translateY(100%);
}

/* 3. Acto II: La Escena de la Puerta */
.escena-puerta {
  position: absolute;
  width: 100%;
  height: 100%;
  opacity: 0; /* La escena comienza oculta */
  transition: opacity 1s ease-in-out 1s; /* Aparece después de que los ojos se abran */
}

#pantalla-carga.abriendo-ojos .escena-puerta {
  opacity: 1; /* Hacemos visible la escena */
}

/* La pared con una textura sutil */
.pared {
  width: 100%;
  height: 100%;
  background-color: #3d3a37;
  background-image: linear-gradient(0deg, #3d3a37 0%, #4a4642 100%);
}

.puerta {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 300px;
  height: 500px;
  background-color: #2a2826;
  border: 10px solid #1a1917;
  border-radius: 4px;
  box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
  display: grid;
  place-items: center;
  /* Preparamos la puerta para la animación de apertura 3D */
  transform: translate(-50%, -50%) perspective(1500px) rotateY(0deg);
  transform-origin: left center; /* La puerta pivotará sobre sus bisagras izquierdas */
  transition: transform 1.5s cubic-bezier(0.65, 0, 0.35, 1) 4.5s; /* La apertura se retrasa 4.5s */
}

/* 4. Acto III: El Dibujo del Sello en la Puerta */
.logo-en-puerta {
  width: 250px;
}

.logo-en-puerta .forma,
.logo-en-puerta .texto-logo {
  stroke: #d4c09a; /* Un color oro viejo para el grabado */
  fill: transparent;
  opacity: 0; /* El logo comienza invisible */
}

#pantalla-carga.abriendo-ojos .logo-en-puerta .forma {
  stroke-width: 8;
  stroke-dasharray: 15000;
  stroke-dashoffset: 15000;
  opacity: 1;
  animation: draw 2.5s ease-out 2s forwards; /* Se dibuja 2s después de abrir los ojos */
}

#pantalla-carga.abriendo-ojos .logo-en-puerta .texto-logo {
  font-family: var(--font-heading);
  font-size: 3rem;
  stroke-width: 1;
  stroke-dasharray: 2000;
  stroke-dashoffset: 2000;
  opacity: 1;
  animation: draw 2s ease-out 3s forwards; /* El texto se dibuja un poco después */
}

@keyframes draw {
  to {
    stroke-dashoffset: 0;
  }
}

/* 5. Acto Final: La Apertura de la Puerta y Desvanecimiento */
#pantalla-carga.oculto .puerta {
  transform: translate(-50%, -50%) perspective(1500px) rotateY(-110deg);
}

#pantalla-carga.oculto {
  opacity: 0;
  visibility: hidden;
  /* El desvanecimiento final ocurre después de que la puerta se abra */
  transition: opacity 0.8s 5s, visibility 0.8s 5s;
}
